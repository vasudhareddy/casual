// Elastic Starter
implementation "com.wellsfargo.ebssh.orchestra:framework-elastic-starter"

// CXF Codegen Dependencies (Latest Versions)
implementation "jakarta.xml.ws:jakarta.xml.ws-api:4.0.0"         // Latest Jakarta XML Web Services API
implementation "jakarta.annotation:jakarta.annotation-api:2.1.1" // Latest Jakarta Annotations API
implementation "jakarta.xml.bind:jakarta.xml.bind-api:4.0.0"     // Latest Jakarta XML Binding API
implementation "org.glassfish.jaxb:jaxb-runtime:4.0.2"           // Latest JAXB Runtime for Jakarta
implementation "org.apache.cxf:cxf-core:4.0.1"                  // Latest Apache CXF Core
implementation "org.apache.cxf:cxf-rt-frontend-jaxws:4.0.1"     // CXF JAX-WS Frontend
implementation "org.apache.cxf:cxf-rt-transports-http:4.0.1"    // CXF HTTP Transport

// Test and Annotation Dependencies
testImplementation "org.springframework.boot:spring-boot-starter-test"
compileOnly "org.projectlombok:lombok:1.18.30"                  // Latest Lombok
annotationProcessor "org.projectlombok:lombok:1.18.30"

// Task for CXF Codegen
tasks.register("wsdlLoanSearch", Wsdl2Java) {
    toolOptions {
        wsdl.set(file("${projectDir}/src/main/resources/wsdl/LoanSearchV${rootProject.properties['wsdl.loansearch.version']}.wsdl"))
        packageNames.set([rootProject.properties['wsdl.loansearch.packagename']])
    }
}

tasks.withType(Wsdl2Java).configureEach {
    toolOptions {
        outputDir.set(file("${buildDir}/generated/sources/wsdl/"))
        bindingFiles.add(layout.projectDirectory.file("src/main/resources/wsdl/bindings.xml").asFile.absolutePath)
    }
}

// Ensure that compileJava depends on the WSDL task
compileJava.dependsOn wsdlLoanSearch

// Maven Publication (Optional)
publishing {
    publications {
        bootJava(MavenPublication) {
            from components.java
        }
    }
}
